module.exports=[70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},14747,(e,t,r)=>{t.exports=e.x("path",()=>require("path"))},71119,(e,t,r)=>{let n=e.r(14747),i=e.r(22734),a=n.join(process.cwd(),"public","uploads");t.exports={UPLOADS_DIR:a,ensureUploadsDir:function(){i.existsSync(a)||i.mkdirSync(a,{recursive:!0})},sanitizeFilename:function(e){if(!e)return`${Date.now()}`;let t=n.extname(e),r=n.basename(e,t).replace(/[^a-z0-9-_\. ]/gi,"_"),i=Date.now();return`${i}-${r}${t}`},publicUrlFor:function(e){return e?`/uploads/${encodeURIComponent(e)}`:null}}},83748,e=>{"use strict";e.s(["config",()=>m,"default",()=>f,"handler",()=>x],83748);var t=e.i(26747),r=e.i(90406),n=e.i(44898),i=e.i(62950);e.s(["default",()=>u],4561);let a=e.r(22734),s=e.r(14747),{UPLOADS_DIR:o,ensureUploadsDir:l}=e.r(71119);async function u(e,t){if("POST"!==e.method&&"DELETE"!==e.method)return t.status(405).json({error:"Method not allowed"});try{l();let{filename:r}=e.body||{};if(!r)return t.status(400).json({error:"Missing filename"});let n=s.join(o,r);if(!a.existsSync(n))return t.status(404).json({error:"Not found"});await a.promises.unlink(n),t.status(200).json({deleted:r})}catch(e){console.error("files/delete error",e),t.status(500).json({error:"Delete failed"})}}var d=e.i(4561),p=e.i(7031),c=e.i(81927);let f=(0,i.hoist)(d,"default"),m=(0,i.hoist)(d,"config"),h=new n.PagesAPIRouteModule({definition:{kind:r.RouteKind.PAGES_API,page:"/api/files/delete",pathname:"/api/files/delete",bundlePath:"",filename:""},userland:d,distDir:".next",relativeProjectDir:""});async function x(e,r,n){let i="/api/files/delete";i=i.replace(/\/index$/,"")||"/";let a=await h.prepare(e,r,{srcPage:i});if(!a){r.statusCode=400,r.end("Bad Request"),null==n.waitUntil||n.waitUntil.call(n,Promise.resolve());return}let{query:s,params:o,prerenderManifest:l,routerServerContext:u}=a;try{let t=e.method||"GET",n=(0,p.getTracer)(),i=n.getActiveScopeSpan(),a=h.instrumentationOnRequestError.bind(h),d=async i=>h.render(e,r,{query:{...s,...o},params:o,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:l.preview,propagateError:!1,dev:h.isDev,page:"/api/files/delete",internalRevalidate:null==u?void 0:u.revalidate,onError:(...t)=>a(e,...t)}).finally(()=>{if(!i)return;i.setAttributes({"http.status_code":r.statusCode,"next.rsc":!1});let a=n.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==c.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let s=a.get("next.route");if(s){let e=`${t} ${s}`;i.setAttributes({"next.route":s,"http.route":s,"next.span_name":e}),i.updateName(e)}else i.updateName(`${t} ${e.url}`)});i?await d(i):await n.withPropagatedContext(e.headers,()=>n.trace(c.BaseServerSpan.handleRequest,{spanName:`${t} ${e.url}`,kind:p.SpanKind.SERVER,attributes:{"http.method":t,"http.target":e.url}},d))}catch(e){if(h.isDev)throw e;(0,t.sendError)(r,500,"Internal Server Error")}finally{null==n.waitUntil||n.waitUntil.call(n,Promise.resolve())}}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__4e6011c3._.js.map