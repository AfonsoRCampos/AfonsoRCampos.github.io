{"version":3,"sources":["turbopack:///[project]/src/components/InputText.js","turbopack:///[project]/node_modules/@babel/runtime/helpers/typeof.js","turbopack:///[project]/node_modules/@babel/runtime/helpers/toPrimitive.js","turbopack:///[project]/node_modules/@babel/runtime/helpers/toPropertyKey.js","turbopack:///[project]/node_modules/@babel/runtime/helpers/defineProperty.js","turbopack:///[project]/src/app/a3/[id]/edit/page.js"],"sourcesContent":["'use client';\r\n\r\nimport React from \"react\";\r\n\r\n/**\r\n * Reusable text input component with customizable size and colors.\r\n *\r\n * Props:\r\n * - value: string\r\n * - onChange: function\r\n * - width: string (e.g. '200px', '100%')\r\n * - height: string (e.g. '40px', '2em')\r\n * - borderColor: string (CSS color)\r\n * - bgColor: string (CSS color)\r\n * - hoverColor: string (CSS color)\r\n * - ...rest: other input props\r\n */\r\nexport default function InputText({\r\n    id,\r\n    value,\r\n    onChange,\r\n    width = \"100%\",\r\n    height = \"2.5em\",\r\n    borderColor = \"var(--main)\",\r\n    bgColor = \"white\",\r\n    hoverColor = \"white\",\r\n    style = {},\r\n    placeholder = \"Enter text...\",\r\n    min,\r\n    max,\r\n    ...rest\r\n}) {\r\n    const [isHovered, setIsHovered] = React.useState(false);\r\n\r\n    // If `options` is provided, render a select element\r\n    const options = rest.options;\r\n\r\n    const baseStyle = {\r\n        width,\r\n        height: height,\r\n        border: `1px solid ${borderColor}`,\r\n        background: isHovered ? hoverColor : bgColor,\r\n        borderRadius: \"6px\",\r\n        padding: \"0.25em 0.75em\",\r\n        fontSize: \"1em\",\r\n        transition: \"background 0.2s, border-color 0.2s\",\r\n        boxSizing: \"border-box\",\r\n        color: 'black',\r\n        ...style,\r\n    };\r\n\r\n    if (options && Array.isArray(options)) {\r\n        return (\r\n            <select\r\n                id={id}\r\n                value={value}\r\n                onChange={onChange}\r\n                style={baseStyle}\r\n                onMouseEnter={() => setIsHovered(true)}\r\n                onMouseLeave={() => setIsHovered(false)}\r\n                {...rest}\r\n                placeholder={placeholder}\r\n            >\r\n                {options.map((opt, i) => {\r\n                    // Support simple string options or objects with { value, label, disabled, title }\r\n                    if (typeof opt === 'string') return <option key={i} value={opt}>{opt}</option>;\r\n                    const disabled = Boolean(opt.disabled);\r\n                    const title = opt.title || undefined;\r\n                    return <option key={i} value={opt.value} disabled={disabled} title={title}>{opt.label ?? opt.value}</option>;\r\n                })}\r\n            </select>\r\n        );\r\n    }\r\n    const handleChange = (e) => {\r\n        if (!onChange) return;\r\n        const isNumberType = (rest.type === 'number') || (rest.inputMode === 'numeric') || (rest.inputMode === 'decimal');\r\n        if (isNumberType && (min !== undefined || max !== undefined)) {\r\n            const raw = e?.target?.value ?? '';\r\n            if (raw === '') {\r\n                // forward empty\r\n                onChange({ target: { value: '' } });\r\n                return;\r\n            }\r\n            const parsed = parseFloat(raw);\r\n            if (Number.isNaN(parsed)) {\r\n                // forward as-is\r\n                onChange(e);\r\n                return;\r\n            }\r\n            let clamped = parsed;\r\n            if (min !== undefined) clamped = Math.max(Number(min), clamped);\r\n            if (max !== undefined) clamped = Math.min(Number(max), clamped);\r\n            // If clamped differs, forward the clamped value, else forward original event\r\n            if (clamped !== parsed) {\r\n                onChange({ target: { value: String(clamped) } });\r\n            } else {\r\n                onChange(e);\r\n            }\r\n            return;\r\n        }\r\n\r\n        onChange(e);\r\n    };\r\n\r\n    return (\r\n        <input\r\n            id={id}\r\n            type={rest.type || 'text'}\r\n            value={value}\r\n            onChange={handleChange}\r\n            placeholder={placeholder}\r\n            style={baseStyle}\r\n            onMouseEnter={() => setIsHovered(true)}\r\n            onMouseLeave={() => setIsHovered(false)}\r\n            min={min}\r\n            max={max}\r\n            {...rest}\r\n        />\r\n    );\r\n}\r\n","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nmodule.exports = toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nmodule.exports = toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use client\";\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useParams, useRouter } from 'next/navigation';\r\nimport { useUser } from '@/state/UserContext';\r\nimport { useA3s } from '@/state/A3Context';\r\nimport EditorShell from '@/components/EditorShell';\r\nimport useMeasure from 'react-use-measure';\r\nimport { generateBuckets, shouldDisableFrequency } from '@/utils/bucketUtils';\r\nimport LayoutSettingsPanel from '@/components/LayoutSettingsPanel';\r\nimport PublishButton from '@/components/PublishButton';\r\nimport A3Preview from '@/components/A3Preview';\r\nimport SectionEditorsPanel from '@/components/SectionEditorsPanel';\r\nimport { FaGear } from 'react-icons/fa6';\r\nimport { ensureLateFlagsForA3, ensureProgressForA3 } from '@/utils/actionsHelpers';\r\n\r\nexport default function EditA3Page() {\r\n    const params = useParams();\r\n    const router = useRouter();\r\n    const { user } = useUser();\r\n    const { a3s = [], setA3s } = useA3s();\r\n    const id = params?.id || '';\r\n\r\n    const [a3, setA3] = useState(null);\r\n\r\n    const [activeArea, setActiveArea] = useState(null);\r\n    const [isOwner, setIsOwner] = useState(false);\r\n    const [refPlan2, boundsPlan2] = useMeasure();\r\n    const [refPlan4, boundsPlan4] = useMeasure();\r\n    const [refPreview, boundsPreview] = useMeasure();\r\n    const [showLayout, setShowLayout] = useState(false);\r\n    const [saving, setSaving] = useState(false);\r\n    const gearRef = React.useRef(null);\r\n    const [layoutEditable, setLayoutEditable] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const isInList = (list) => {\r\n            if (!list) return false;\r\n            try {\r\n                return Array.isArray(list) && user ? list.includes(user) : false;\r\n            } catch (e) { return false; }\r\n        };\r\n\r\n        const found = (a3s || []).find(x => x?.header?.id === id) || null;\r\n        if (!found) return; // wait for list to load\r\n        // authorization: owner or team member\r\n        const owner = found.header?.owner;\r\n        const team = Array.isArray(found.header?.team) ? found.header.team : [];\r\n        if (!(owner === user || team.includes(user))) {\r\n            // not authorized\r\n            router.push('/home');\r\n            return;\r\n        }\r\n        // compute late flags and persist if changed\r\n        try {\r\n            let updated = ensureLateFlagsForA3(found);\r\n            updated = ensureProgressForA3(updated);\r\n            const changed = JSON.stringify(updated) !== JSON.stringify(found);\r\n            setIsOwner(owner === user);\r\n            setA3(updated);\r\n            setLayoutEditable(owner === user || isInList(updated.layout?.canEdit));\r\n            if (changed) {\r\n                (async () => {\r\n                    try {\r\n                        const res = await fetch('/api/a3s', {\r\n                            method: 'PUT',\r\n                            headers: { 'Content-Type': 'application/json' },\r\n                            body: JSON.stringify(updated)\r\n                        });\r\n                        if (!res.ok) {\r\n                            const txt = await res.text().catch(() => '');\r\n                            console.warn('Auto-save late flags/progress failed', res.status, txt);\r\n                        }\r\n                    } catch (e) {\r\n                        console.warn('Auto-save late flags/progress error', e);\r\n                    }\r\n                })();\r\n            }\r\n        } catch (e) {\r\n            setIsOwner(owner === user);\r\n            setA3(found);\r\n            setLayoutEditable(owner === user || isInList(found.layout?.canEdit));\r\n        }\r\n    }, [a3s, id, router, user]);\r\n\r\n    useEffect(() => {\r\n        const start = a3?.header?.start;\r\n        const end = a3?.header?.end;\r\n        if (!start || !end || !a3?.metrics) return;\r\n\r\n        const pickBestForGranularity = (granularity) => {\r\n            const freqOrder = { daily: 0, weekly: 1, monthly: 2 };\r\n            const granularityOrder = { days: 0, weeks: 1, months: 2 };\r\n            const isFreqAllowedByGranularity = (freq, gran) => {\r\n                if (!gran) return true;\r\n                const fi = freqOrder[freq] ?? 0;\r\n                const gi = granularityOrder[gran] ?? 0;\r\n                return fi >= gi;\r\n            };\r\n\r\n            if (isFreqAllowedByGranularity('daily', granularity) && !shouldDisableFrequency(start, end, 'daily', 100)) return 'daily';\r\n            if (isFreqAllowedByGranularity('weekly', granularity) && !shouldDisableFrequency(start, end, 'weekly', 100)) return 'weekly';\r\n            if (isFreqAllowedByGranularity('monthly', granularity) && !shouldDisableFrequency(start, end, 'monthly', 100)) return 'monthly';\r\n            return null;\r\n        };\r\n\r\n        let didPopulate = false;\r\n        const next = typeof structuredClone === 'function' ? structuredClone(a3) : JSON.parse(JSON.stringify(a3));\r\n\r\n        // populate lag if missing or ensure first bucket reflects initial when empty\r\n        next.metrics = next.metrics || {};\r\n        const lag = next.metrics.lag || {};\r\n        const lagData = Array.isArray(lag.data) ? lag.data : [];\r\n        if (!lagData || lagData.length === 0) {\r\n            const lagGran = (next.metrics.lag?.target?.granularity) || null;\r\n            const chosen = next.metrics.lag?.display?.freq || pickBestForGranularity(lagGran);\r\n            if (chosen) {\r\n                const buckets = generateBuckets(start, end, chosen);\r\n                const initialVal = typeof next.metrics.lag?.initial !== 'undefined' ? next.metrics.lag.initial : null;\r\n                next.metrics.lag = {\r\n                    ...(next.metrics.lag || {}),\r\n                    data: buckets.map((d, i) => ({ date: d, value: i === 0 && initialVal !== null && initialVal !== '' ? initialVal : null })),\r\n                    display: { ...(next.metrics.lag.display || {}), freq: chosen }\r\n                };\r\n                didPopulate = true;\r\n            }\r\n        } else {\r\n            // if data exists, ensure the first bucket has the metric.initial when it's empty\r\n            try {\r\n                const first = next.metrics.lag.data[0] || {};\r\n                const firstVal = typeof first.value === 'undefined' ? null : first.value;\r\n                const initialVal = typeof next.metrics.lag?.initial !== 'undefined' ? next.metrics.lag.initial : null;\r\n                // normalize to numbers; treat non-finite results (NaN/Infinity) as null to avoid unstable comparisons\r\n                const normFirst = (firstVal === null || firstVal === '' || !Number.isFinite(Number(firstVal))) ? null : Number(firstVal);\r\n                const normInitial = (initialVal === null || initialVal === '' || !Number.isFinite(Number(initialVal))) ? null : Number(initialVal);\r\n                if (normFirst !== normInitial) {\r\n                    next.metrics.lag.data[0] = { ...(next.metrics.lag.data[0] || {}), value: normInitial };\r\n                    didPopulate = true;\r\n                }\r\n            } catch (e) { /* ignore */ }\r\n        }\r\n\r\n        // populate leads if missing or ensure first bucket reflects initial when empty\r\n        next.metrics.leads = next.metrics.leads || [];\r\n        for (let i = 0; i < next.metrics.leads.length; i++) {\r\n            const lead = next.metrics.leads[i] || {};\r\n            const leadData = Array.isArray(lead.data) ? lead.data : [];\r\n            if (!leadData || leadData.length === 0) {\r\n                const leadGran = (lead?.target?.granularity) || null;\r\n                const chosen = lead.display?.freq || pickBestForGranularity(leadGran);\r\n                if (chosen) {\r\n                    const buckets = generateBuckets(start, end, chosen);\r\n                    const initialVal = typeof lead?.initial !== 'undefined' ? lead.initial : null;\r\n                    next.metrics.leads[i] = {\r\n                        ...(next.metrics.leads[i] || {}),\r\n                        data: buckets.map((d, idx) => ({ date: d, value: idx === 0 && initialVal !== null && initialVal !== '' ? Number(initialVal) : null })),\r\n                        display: { ...(next.metrics.leads[i].display || {}), freq: chosen }\r\n                    };\r\n                    didPopulate = true;\r\n                }\r\n            } else {\r\n                // if data exists, ensure first bucket aligns with initial when empty\r\n                try {\r\n                    const first = next.metrics.leads[i].data[0] || {};\r\n                    const firstVal = typeof first.value === 'undefined' ? null : first.value;\r\n                    const initialVal = typeof next.metrics.leads[i]?.initial !== 'undefined' ? next.metrics.leads[i].initial : null;\r\n                    const normFirst = (firstVal === null || firstVal === '' || !Number.isFinite(Number(firstVal))) ? null : Number(firstVal);\r\n                    const normInitial = (initialVal === null || initialVal === '' || !Number.isFinite(Number(initialVal))) ? null : Number(initialVal);\r\n                    if (normFirst !== normInitial) {\r\n                        next.metrics.leads[i].data[0] = { ...(next.metrics.leads[i].data[0] || {}), value: normInitial };\r\n                        didPopulate = true;\r\n                    }\r\n                } catch (e) { /* ignore */ }\r\n            }\r\n        }\r\n\r\n        if (didPopulate) setA3(next);\r\n    }, [a3, setA3]);\r\n\r\n    if (!user) return null;\r\n\r\n    if (!a3) {\r\n        return <div style={{ padding: 24, textAlign: 'center' }}>Loading A3 for editâ€¦</div>;\r\n    }\r\n\r\n    const updateDraft = async () => {\r\n        try {\r\n            setSaving(true);\r\n            // create a copy and ensure draft/published flags\r\n            const next = typeof structuredClone === 'function' ? structuredClone(a3) : JSON.parse(JSON.stringify(a3));\r\n            next.draft = a3.draft;\r\n            next.published = a3.published;\r\n            next.header = next.header || {};\r\n            next.header.lastUpdated = new Date().toISOString();\r\n\r\n            const res = await fetch('/api/a3s', {\r\n                method: 'PUT',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(next)\r\n            });\r\n\r\n            if (!res.ok) {\r\n                const text = await res.text();\r\n                console.error('Failed to update A3', res.status, text);\r\n                return;\r\n            }\r\n\r\n            const saved = await res.json();\r\n            // update local state with server response (if any)\r\n            const final = saved || next;\r\n            setA3(final);\r\n            // refresh global list from server to pick up side-effects (refs/refBy updates)\r\n            try {\r\n                if (typeof setA3s === 'function') {\r\n                    const rr = await fetch('/api/a3s');\r\n                    if (rr.ok) {\r\n                        const data = await rr.json();\r\n                        setA3s(Array.isArray(data) ? data : []);\r\n                    } else {\r\n                        setA3s(prev => {\r\n                            const list = Array.isArray(prev) ? prev.slice() : [];\r\n                            const idx = list.findIndex(x => x?.header?.id === final?.header?.id);\r\n                            if (idx >= 0) list[idx] = final;\r\n                            else list.push(final);\r\n                            return list;\r\n                        });\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                console.warn('Could not refresh global A3 list', e);\r\n            }\r\n            console.log('A3 updated', saved);\r\n            // navigate back to the list after saving draft\r\n            router.push('/home');\r\n\r\n        } catch (e) {\r\n            console.error('Error updating A3', e);\r\n            router.push('/home');\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    };\r\n\r\n    const createNewVersion = async () => {\r\n        updateDraft();\r\n        try {\r\n            setSaving(true);\r\n            const series = a3?.header?.id?.split('-')?.[1];\r\n            if (!series) {\r\n                console.error('Cannot determine series id for versioning');\r\n                return;\r\n            }\r\n\r\n            const body = { author: user || null, message: `Version from ${user || 'unknown'}` };\r\n            const res = await fetch(`/api/a3s/${series}/versions`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(body)\r\n            });\r\n\r\n            if (!res.ok) {\r\n                const text = await res.text();\r\n                console.error('Failed to create version', res.status, text);\r\n                return;\r\n            }\r\n\r\n            const data = await res.json(); // { version, meta }\r\n            const nextVersion = data?.version;\r\n\r\n            // Update local A3 id to new version\r\n            setA3(prev => {\r\n                if (!prev) return prev;\r\n                const next = typeof structuredClone === 'function' ? structuredClone(prev) : JSON.parse(JSON.stringify(prev));\r\n                if (next.header && typeof next.header.id === 'string') {\r\n                    const parts = next.header.id.split('-');\r\n                    parts[2] = nextVersion;\r\n                    next.header.id = parts.join('-');\r\n                    next.header.lastUpdated = new Date().toISOString();\r\n                    next.published = true;\r\n                    next.draft = false;\r\n                }\r\n                return next;\r\n            });\r\n\r\n            // Refresh global list from server to pick up id-changes and cross-ref updates\r\n            try {\r\n                if (typeof setA3s === 'function') {\r\n                    const rr = await fetch('/api/a3s');\r\n                    if (rr.ok) {\r\n                        const data = await rr.json();\r\n                        setA3s(Array.isArray(data) ? data : []);\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                console.warn('Could not refresh global A3 list after versioning', e);\r\n            }\r\n\r\n            // navigate back to the list\r\n            router.push('/home');\r\n\r\n        } catch (e) {\r\n            console.error('Error creating version', e);\r\n        } finally {\r\n            setSaving(false);\r\n        }\r\n    }\r\n\r\n    const bottomButtonsStyle = {\r\n        height: '5vh',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        display: 'flex',\r\n        border: 'none',\r\n        borderRadius: 6,\r\n        cursor: 'pointer',\r\n        color: 'white',\r\n        fontWeight: 'bold',\r\n    }\r\n\r\n    const colors = [\r\n        [\"var(--blue-highlight)\", \"var(--blue-highlight)\", , \"var(--blue)\"],\r\n        [\"var(--accent-highlight)\", \"var(--accent-highlight)\", \"var(--accent)\"],\r\n        [\"white\", \"var(--accent-highlight)\", \"var(--accent)\"],\r\n        [\"var(--accent-highlight)\", \"var(--accent-highlight)\", \"var(--accent)\"],\r\n        [\"white\", \"var(--accent-highlight)\", \"var(--accent)\"],\r\n        [\"var(--green-highlight)\", \"var(--green-highlight)\", \"var(--green)\"],\r\n        [\"var(--orange-highlight)\", \"var(--orange-highlight)\", \"var(--orange)\"],\r\n    ];\r\n\r\n    const activeAreaLabel = {\r\n        0: 'header',\r\n        1: 'probDef',\r\n        2: 'currentState',\r\n        3: 'objectives',\r\n        4: 'actionPlan',\r\n        5: null,\r\n        6: 'metrics'\r\n    }\r\n\r\n    return (\r\n        <div style={{ width: \"100vw\", minHeight: \"100vh\", padding: \"1em\", boxSizing: \"border-box\", justifySelf: \"center\", alignItems: \"center\", display: \"flex\", flexDirection: \"column\", background: \"#f0f0f0\", gap: \"6px\" }}>\r\n            <EditorShell\r\n                a3={a3}\r\n                setA3={setA3}\r\n                activeArea={activeArea}\r\n                setActiveArea={setActiveArea}\r\n                boundsPreview={boundsPreview}\r\n                refPlan2={refPlan2}\r\n                boundsPlan2={boundsPlan2}\r\n                refPlan4={refPlan4}\r\n                boundsPlan4={boundsPlan4}\r\n            />\r\n            {isOwner && <SectionEditorsPanel a3={a3} setA3={setA3} activeArea={activeAreaLabel[activeArea]} setShowLayout={setShowLayout} width={boundsPreview.width} color={activeArea ? colors[activeArea][2] : undefined} />}\r\n            <A3Preview\r\n                a3={a3}\r\n                setA3={setA3}\r\n                activeArea={activeArea}\r\n                setActiveArea={setActiveArea}\r\n                refPlan2={refPlan2}\r\n                boundsPlan2={boundsPlan2}\r\n                refPlan4={refPlan4}\r\n                boundsPlan4={boundsPlan4}\r\n                refPreview={refPreview}\r\n                boundsPreview={boundsPreview}\r\n                showLayout={showLayout}\r\n                setShowLayout={setShowLayout}\r\n                toggleImgSelectorCurrent={() => { imagePickerTarget.current = 'currentState'; setImagePickerOpen(true); }}\r\n                toggleImgSelectorActionPlan={() => { imagePickerTarget.current = 'actionPlan'; setImagePickerOpen(true); }}\r\n                editable={true}\r\n                owner={isOwner}\r\n            />\r\n            <div style={{ width: boundsPreview.width, display: 'flex', justifyContent: 'space-between', alignItems: 'center', gap: 8 }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\r\n                    {layoutEditable && (\r\n                        <>\r\n                            <button ref={gearRef} onClick={() => setShowLayout(prev => !prev)} aria-expanded={showLayout} aria-label=\"Layout settings\"\r\n                                style={{ ...bottomButtonsStyle, aspectRatio: '1/1', backgroundColor: 'var(--main-highlight)' }}>\r\n                                <FaGear />\r\n                            </button>\r\n                            <LayoutSettingsPanel a3={a3} setA3={setA3} open={showLayout} onClose={() => setShowLayout(false)} anchorRef={gearRef} />\r\n                        </>\r\n                    )}\r\n                </div>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: 8 }}>\r\n                    {a3.draft && isOwner && (\r\n                        <>\r\n                            <PublishButton a3={a3} setA3={setA3} style={{ ...bottomButtonsStyle, padding: '6px', backgroundColor: 'var(--main)' }} />\r\n                        </>\r\n                    )}\r\n                    {a3.published && isOwner && (\r\n                        <button\r\n                            onClick={createNewVersion}\r\n                            disabled={saving || !isOwner}\r\n                            style={{ ...bottomButtonsStyle, backgroundColor: 'var(--main)', padding: '6px' }}\r\n                        >\r\n                            {saving ? 'Creating version...' : 'New Version'}\r\n                        </button>\r\n                    )}\r\n                    <button\r\n                        onClick={updateDraft}\r\n                        disabled={saving}\r\n                        style={{ ...bottomButtonsStyle, backgroundColor: 'var(--main-highlight)', padding: '6px' }}\r\n                    >\r\n                        {saving ? 'Updating...' : 'Update'}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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","ignoreList":[1,2,3,4]}