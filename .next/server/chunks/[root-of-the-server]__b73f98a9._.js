module.exports=[70406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},14747,(e,t,r)=>{t.exports=e.x("path",()=>require("path"))},71119,(e,t,r)=>{let i=e.r(14747),a=e.r(22734),n=i.join(process.cwd(),"public","uploads");t.exports={UPLOADS_DIR:n,ensureUploadsDir:function(){a.existsSync(n)||a.mkdirSync(n,{recursive:!0})},sanitizeFilename:function(e){if(!e)return`${Date.now()}`;let t=i.extname(e),r=i.basename(e,t).replace(/[^a-z0-9-_\. ]/gi,"_"),a=Date.now();return`${a}-${r}${t}`},publicUrlFor:function(e){return e?`/uploads/${encodeURIComponent(e)}`:null}}},97053,e=>{"use strict";e.s(["config",()=>h,"default",()=>m,"handler",()=>v],97053);var t=e.i(26747),r=e.i(90406),i=e.i(44898),a=e.i(62950);e.s(["default",()=>p],76206);let n=e.r(22734),s=e.r(14747),{UPLOADS_DIR:l,ensureUploadsDir:o,publicUrlFor:u}=e.r(71119);function p(e,t){try{o();let e=n.readdirSync(l).filter(e=>n.statSync(s.join(l,e)).isFile()).map(e=>({name:e,url:u(e)}));t.status(200).json({files:e})}catch(e){console.error("files/list error",e),t.status(500).json({error:"Failed to list files"})}}var d=e.i(76206),c=e.i(7031),f=e.i(81927);let m=(0,a.hoist)(d,"default"),h=(0,a.hoist)(d,"config"),x=new i.PagesAPIRouteModule({definition:{kind:r.RouteKind.PAGES_API,page:"/api/files/list",pathname:"/api/files/list",bundlePath:"",filename:""},userland:d,distDir:".next",relativeProjectDir:""});async function v(e,r,i){let a="/api/files/list";a=a.replace(/\/index$/,"")||"/";let n=await x.prepare(e,r,{srcPage:a});if(!n){r.statusCode=400,r.end("Bad Request"),null==i.waitUntil||i.waitUntil.call(i,Promise.resolve());return}let{query:s,params:l,prerenderManifest:o,routerServerContext:u}=n;try{let t=e.method||"GET",i=(0,c.getTracer)(),a=i.getActiveScopeSpan(),n=x.instrumentationOnRequestError.bind(x),p=async a=>x.render(e,r,{query:{...s,...l},params:l,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:o.preview,propagateError:!1,dev:x.isDev,page:"/api/files/list",internalRevalidate:null==u?void 0:u.revalidate,onError:(...t)=>n(e,...t)}).finally(()=>{if(!a)return;a.setAttributes({"http.status_code":r.statusCode,"next.rsc":!1});let n=i.getRootSpanAttributes();if(!n)return;if(n.get("next.span_type")!==f.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${n.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let s=n.get("next.route");if(s){let e=`${t} ${s}`;a.setAttributes({"next.route":s,"http.route":s,"next.span_name":e}),a.updateName(e)}else a.updateName(`${t} ${e.url}`)});a?await p(a):await i.withPropagatedContext(e.headers,()=>i.trace(f.BaseServerSpan.handleRequest,{spanName:`${t} ${e.url}`,kind:c.SpanKind.SERVER,attributes:{"http.method":t,"http.target":e.url}},p))}catch(e){if(x.isDev)throw e;(0,t.sendError)(r,500,"Internal Server Error")}finally{null==i.waitUntil||i.waitUntil.call(i,Promise.resolve())}}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__b73f98a9._.js.map